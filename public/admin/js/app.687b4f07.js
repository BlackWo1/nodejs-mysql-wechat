(function(t){function e(e){for(var r,o,i=e[0],l=e[1],c=e[2],d=0,m=[];d<i.length;d++)o=i[d],n[o]&&m.push(n[o][0]),n[o]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(t[r]=l[r]);u&&u(e);while(m.length)m.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],r=!0,i=1;i<a.length;i++){var l=a[i];0!==n[l]&&(r=!1)}r&&(s.splice(e--,1),t=o(o.s=a[0]))}return t}var r={},n={app:0},s=[];function o(e){if(r[e])return r[e].exports;var a=r[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=r,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(a,r,function(e){return t[e]}.bind(null,r));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/admin/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var u=l;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"024f":function(t,e,a){"use strict";var r=a("42ad"),n=a.n(r);n.a},"054f":function(t,e,a){},"0670":function(t,e,a){},2619:function(t,e,a){},"2a56":function(t,e,a){},"2fd1":function(t,e,a){"use strict";var r=a("2619"),n=a.n(r);n.a},3191:function(t,e,a){"use strict";var r=a("baa0"),n=a.n(r);n.a},"36a9":function(t,e,a){"use strict";var r=a("0670"),n=a.n(r);n.a},"42ad":function(t,e,a){},"4ce0":function(t,e,a){"use strict";var r=a("054f"),n=a.n(r);n.a},"4da8":function(t,e,a){"use strict";var r=a("e981"),n=a.n(r);n.a},5202:function(t,e,a){},"523f":function(t,e,a){"use strict";var r=a("8553"),n=a.n(r);n.a},"56d7":function(t,e,a){"use strict";a.r(e);a("14c6"),a("08c1"),a("4842"),a("d9fc");var r=a("2b0e"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("router-view")],1)},s=[],o={},i=o,l=(a("5c0b"),a("2877")),c=Object(l["a"])(i,n,s,!1,null,null,null),u=c.exports,d=a("8c4f"),m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bg"},[a("div",{staticClass:"form-box"},[a("form",{attrs:{action:""}},[a("div",{staticClass:"title"},[t._v("欢迎登陆")]),a("div",{staticClass:"body"},[a("div",{staticClass:"form-control",class:{error:!t.valid[0]}},[t._m(0),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.username,expression:"formData.username"}],staticClass:"input-control",attrs:{type:"text",placeholder:"请输入账户名"},domProps:{value:t.formData.username},on:{blur:t.checkUsername,input:function(e){e.target.composing||t.$set(t.formData,"username",e.target.value)}}})]),a("div",{staticClass:"form-control",class:{error:!t.valid[1]}},[t._m(1),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.password,expression:"formData.password"}],staticClass:"input-control",attrs:{type:"password",pattern:"[1-9]\\d{6,}",placeholder:"请输入密码"},domProps:{value:t.formData.password},on:{blur:t.checkPassword,input:function(e){e.target.composing||t.$set(t.formData,"password",e.target.value)}}})]),a("div",{staticClass:"form-control"},[a("button",{staticClass:"btn",attrs:{type:"button"},on:{click:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.regHandle(e)}}},[t._v("登 录")])]),a("div",{staticClass:"link-box"},[a("router-link",{attrs:{to:"/register"}},[t._v("注册账户")]),a("router-link",{attrs:{to:"/register"}},[t._v("忘记密码？")])],1)])])])])},p=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"add-on"},[a("i",{staticClass:"fa fa-user"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"add-on"},[a("i",{staticClass:"fa fa-lock"})])}],f=a("cebc"),h={props:["redirect"],data:function(){return{formData:{username:"",password:""},valid:[!0,!0]}},methods:{checkUsername:function(){var t=/[A-Za-z0-9_-]{5,}/,e=t.test(this.formData.username);return this.$set(this.valid,0,e),e},checkPassword:function(){var t=/\d{6,}/,e=t.test(this.formData.password);return this.$set(this.valid,1,e),e},regHandle:function(){var t=this,e=this.checkUsername()&&this.checkPassword();e&&this.$store.dispatch("User/Login",Object(f["a"])({},this.formData)).then(function(e){sessionStorage.token=e.data.token,sessionStorage.uid=e.data.id,sessionStorage.role=e.data.role,t.$message({message:e.msg,type:"success",duration:1e3,onClose:function(){t.redirect?t.$router.push(t.redirect):t.$router.push("/index")}})}).catch(function(e){t.$message.error(e.msg)})}}},v=h,b=(a("36a9"),Object(l["a"])(v,m,p,!1,null,"61bf3bcd",null)),g=b.exports,_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bg"},[a("div",{staticClass:"form-box"},[a("form",{attrs:{action:""}},[a("div",{staticClass:"title"},[t._v("注册新账户")]),a("div",{staticClass:"body"},[a("div",{staticClass:"form-control"},[t._m(0),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.username,expression:"formData.username"}],staticClass:"input-control",attrs:{type:"text",placeholder:"请输入账户名"},domProps:{value:t.formData.username},on:{input:function(e){e.target.composing||t.$set(t.formData,"username",e.target.value)}}})]),a("div",{staticClass:"form-control"},[t._m(1),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.password,expression:"formData.password"}],staticClass:"input-control",attrs:{type:"password",placeholder:"请输入密码"},domProps:{value:t.formData.password},on:{input:function(e){e.target.composing||t.$set(t.formData,"password",e.target.value)}}})]),a("div",{staticClass:"form-control"},[t._m(2),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.nickname,expression:"formData.nickname"}],staticClass:"input-control",attrs:{type:"text",placeholder:"请输入昵称"},domProps:{value:t.formData.nickname},on:{input:function(e){e.target.composing||t.$set(t.formData,"nickname",e.target.value)}}})]),a("div",{staticClass:"form-control"},[t._m(3),a("div",{staticClass:"sex-box"},[a("label",{attrs:{for:"man"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.sex,expression:"formData.sex"}],attrs:{checked:"",name:"sex",value:"男",id:"man",type:"radio"},domProps:{checked:t._q(t.formData.sex,"男")},on:{change:function(e){return t.$set(t.formData,"sex","男")}}}),a("i",{staticClass:"fa fa-mars"}),t._v("\n\t\t\t\t\t\t\t男\n\t\t\t\t\t\t")]),a("label",{attrs:{for:"woman"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.sex,expression:"formData.sex"}],attrs:{id:"woman",name:"sex",value:"女",type:"radio"},domProps:{checked:t._q(t.formData.sex,"女")},on:{change:function(e){return t.$set(t.formData,"sex","女")}}}),a("i",{staticClass:"fa fa-venus"}),t._v("\n\t\t\t\t\t\t\t女\n\t\t\t\t\t\t")])])]),a("div",{staticClass:"form-control"},[t._m(4),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.tel,expression:"formData.tel"}],staticClass:"input-control",attrs:{type:"number",placeholder:"请输入手机号码"},domProps:{value:t.formData.tel},on:{input:function(e){e.target.composing||t.$set(t.formData,"tel",e.target.value)}}})]),a("div",{staticClass:"form-control"},[a("button",{staticClass:"btn",attrs:{type:"button"},on:{click:t.regHandle}},[t._v("注 册")])]),a("div",{staticClass:"link-box"},[a("router-link",{attrs:{to:"/login"}},[t._v("密码登录")]),a("router-link",{attrs:{to:"/register"}},[t._v("忘记密码？")])],1)])])])])},x=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"add-on"},[a("i",{staticClass:"fa fa-user"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"add-on"},[a("i",{staticClass:"fa fa-lock"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"add-on"},[a("i",{staticClass:"fa fa-tag"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"add-on"},[a("i",{staticClass:"fa fa-venus-mars"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"add-on"},[a("i",{staticClass:"fa fa-mobile"})])}],k={data:function(){return{formData:{username:"",password:"",nickname:"",sex:"",tel:""}}},methods:{regHandle:function(){var t=this;this.$store.dispatch("User/Register",Object(f["a"])({},this.formData)).then(function(e){sessionStorage.token=e.data.token,sessionStorage.uid=e.data.id,sessionStorage.role=e.data.role,t.$message({message:e.msg,type:"success",duration:1e3,onClose:function(){t.$router.push("/index")}})}).catch(function(e){t.$message.error(e.msg)})}}},w=k,C=(a("523f"),Object(l["a"])(w,_,x,!1,null,"667991af",null)),y=C.exports,$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Title",{attrs:{text:"客户列表"}}),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{prop:"uid",label:"#"}}),a("el-table-column",{attrs:{sortable:"",label:"头像"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticClass:"avatar",attrs:{src:t.row.avatar,width:"60",alt:""}})]}}])}),a("el-table-column",{attrs:{prop:"username",sortable:"",label:"账号"}}),a("el-table-column",{attrs:{prop:"nickname",sortable:"",label:"昵称"}}),a("el-table-column",{attrs:{prop:"sex",sortable:"",label:"性别",width:"120"}}),a("el-table-column",{attrs:{prop:"tel",sortable:"",label:"手机号码"}}),a("el-table-column",{attrs:{prop:"role_name",sortable:"",label:"权限"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{plain:"",icon:"el-icon-edit",size:"small",type:"primary"},on:{click:function(a){return t.showEditModal(e.row)}}}),a("el-button",{attrs:{icon:"el-icon-delete",plain:"",size:"small",type:"danger"},on:{click:function(a){return t.showDeleteModal(e.row.id)}}})]}}])})],1),a("el-dialog",{attrs:{title:"修改信息",visible:t.editModalShow},on:{"update:visible":function(e){t.editModalShow=e}}},[a("el-form",{attrs:{model:t.form,"label-position":"left"}},[a("el-form-item",{attrs:{label:"昵称","label-width":"100px"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.form.nickname,callback:function(e){t.$set(t.form,"nickname",e)},expression:"form.nickname"}})],1),a("el-form-item",{attrs:{label:"性别","label-width":"100px"}},[a("el-radio-group",{model:{value:t.form.sex,callback:function(e){t.$set(t.form,"sex",e)},expression:"form.sex"}},[a("el-radio",{attrs:{label:"男"}},[t._v("男")]),a("el-radio",{attrs:{label:"女"}},[t._v("女")])],1)],1),a("el-form-item",{attrs:{label:"手机","label-width":"100px"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.form.tel,callback:function(e){t.$set(t.form,"tel",t._n(e))},expression:"form.tel"}})],1),a("el-form-item",{attrs:{label:"权限","label-width":"100px"}},[a("el-select",{attrs:{placeholder:"请选择账户"},model:{value:t.form.role,callback:function(e){t.$set(t.form,"role",e)},expression:"form.role"}},t._l(t.roles,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1),a("el-form-item",{attrs:{label:"头像","label-width":"100px"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/api/upload/avatar/",headers:t.headers,"show-file-list":!1,"on-success":t.editUploadSuccess,"before-upload":t.beforeUpload}},[a("div",{staticClass:"el-upload"},[t.form.avatar?a("img",{staticClass:"avatar",attrs:{src:t.form.avatar}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])])],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.editModalShow=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.updateInfo}},[t._v("确 定")])],1)],1)],1)},M=[],j=(a("ac6a"),a("bc3a")),S=a.n(j),O=function(t){return S.a.post("/api/admin/login",t)},E=function(t){return S.a.post("/api/admin/register",t)},F=function(t){return S.a.get("/api/admin/info",{params:t})},D=function(t){return S.a.get("/api/admin/list",{params:t})},R=function(t){return S.a.post("/api/admin/info/update",t)},P={login:O,register:E,getUserInfo:F,list:D,updateUserInfo:R},I=function(t){return S.a.post("/api/category/add",t)},U=function(t){return S.a.post("/api/category/delete",t)},N=function(t){return S.a.post("/api/category/update",t)},A=function(t){return S.a.get("/api/category/sub",{params:t})},V={add:I,remove:U,update:N,load:A},H=function(t){return S.a.post("/api/goods/release",t)},L=function(t){return S.a.post("/api/goods/delete",t)},z=function(t){return S.a.post("/api/goods/edit",t)},B=function(t){return S.a.get("/api/admin/goods/list",{params:t})},T=function(t){return S.a.get("/api/admin/goods/detail",{params:t})},G={release:H,remove:L,update:z,list:B,getDetail:T},q=function(t){return S.a.get("/api/role/list",{params:t})},J=function(t){return S.a.post("/api/role/add",t)},Z=function(t){return S.a.post("/api/role/delete",t)},K=function(t){return S.a.post("/api/role/update",t)},Q=function(t){return S.a.get("/api/role/config",{params:t})},W={load:q,add:J,remove:Z,update:K,loadConfig:Q},X=function(t){return S.a.post("/api/admin/order/list",t)},Y={loadList:X},tt=function(t){return S.a.post("/api/upload/delete",t)},et={deleteImage:tt},at=function(t){return S.a.get("/api/menu/sub",{params:t})},rt=function(t){return S.a.post("/api/menu/add",t)},nt=function(t){return S.a.post("/api/menu/update",t)},st=function(t){return S.a.post("/api/menu/delete",t)},ot={load:at,add:rt,update:nt,remove:st},it=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"title-box am-margin-bottom-lg"},[a("h3",{staticClass:"title"},[t._v(t._s(t.text))])])},lt=[],ct={name:"Title",props:["text"]},ut=ct,dt=(a("cacb"),Object(l["a"])(ut,it,lt,!1,null,"6ebd1e8c",null)),mt=dt.exports,pt={name:"List",components:{Title:mt},data:function(){return{tableData:[],roles:[],headers:{Authorization:"Bearer ".concat(sessionStorage.token)},editModalShow:!1,form:{uid:"",nickname:"",sex:"男",tel:"",role:"",avatar:""}}},created:function(){this.loadList(),this.loadRole()},methods:{loadList:function(t){var e=this;P.list().then(function(t){t.status&&(t.data.forEach(function(t){t.uid=t.id}),e.tableData=t.data)})},loadRole:function(){var t=this;W.load().then(function(e){e.status&&(t.roles=e.data)})},showEditModal:function(t){this.editModalShow=!0,this.form=t},showDeleteModal:function(t){var e=this;this.$confirm("此操作将永久删除该账户, 是否继续?",{type:"warning"}).then(function(){console.log(t)}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},updateInfo:function(){var t=this;P.updateUserInfo(Object(f["a"])({},this.form)).then(function(e){e.status&&(t.editModalShow=!1,t.$message.success(e.msg),t.loadList())})},beforeUpload:function(t){var e="image/jpeg"===t.type||"image/png",a=t.size/1024/1024<2;return e||this.$message.error("上传头像图片只能是 JPG/PNG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),e&&a},editUploadSuccess:function(t,e){this.form.avatar=t.src}}},ft=pt,ht=(a("cdcf"),Object(l["a"])(ft,$,M,!1,null,"59466548",null)),vt=ht.exports,bt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Title",{attrs:{text:"账户信息"}}),a("el-form",{attrs:{model:t.form,"label-position":"left"}},[a("el-form-item",{attrs:{label:"账户","label-width":"100px"}},[a("el-input",{attrs:{disabled:"","auto-complete":"off"},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}})],1),a("el-form-item",{attrs:{label:"昵称","label-width":"100px"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.form.nickname,callback:function(e){t.$set(t.form,"nickname",e)},expression:"form.nickname"}})],1),a("el-form-item",{attrs:{label:"性别","label-width":"100px"}},[a("el-radio-group",{model:{value:t.form.sex,callback:function(e){t.$set(t.form,"sex",e)},expression:"form.sex"}},[a("el-radio",{attrs:{label:"男"}},[t._v("男")]),a("el-radio",{attrs:{label:"女"}},[t._v("女")])],1)],1),a("el-form-item",{attrs:{label:"手机","label-width":"100px"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.form.tel,callback:function(e){t.$set(t.form,"tel",t._n(e))},expression:"form.tel"}})],1),a("el-form-item",{attrs:{label:"权限","label-width":"100px"}},[a("el-select",{attrs:{placeholder:"请选择账户"},model:{value:t.form.role,callback:function(e){t.$set(t.form,"role",e)},expression:"form.role"}},t._l(t.roles,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1),a("el-form-item",{attrs:{label:"头像","label-width":"100px"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/api/upload/avatar/",headers:t.headers,"show-file-list":!1,"on-success":t.editUploadSuccess,"before-upload":t.beforeUpload}},[a("div",{staticClass:"el-upload"},[t.form.avatar?a("img",{staticClass:"avatar",attrs:{src:t.form.avatar}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])])],1),a("el-button",{attrs:{type:"primary"},on:{click:t.updateInfo}},[t._v("修 改")])],1)],1)},gt=[],_t={components:{Title:mt},data:function(){return{headers:{Authorization:"Bearer ".concat(sessionStorage.token)},roles:[],form:{}}},created:function(){this.loadRole(),this.form=Object(f["a"])({},this.$store.state.User.userInfo)},methods:{loadRole:function(){var t=this;W.load().then(function(e){e.status&&(t.roles=e.data)})},updateInfo:function(){var t=this;this.$store.dispatch("User/UpdateUserInfo",Object(f["a"])({},this.form)).then(function(e){e.status&&t.$message.success(e.msg)})},beforeUpload:function(t){var e="image/jpeg"===t.type||"image/png",a=t.size/1024/1024<2;return e||this.$message.error("上传头像图片只能是 JPG/PNG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),e&&a},editUploadSuccess:function(t,e){this.form.avatar=t.src}}},xt=_t,kt=(a("024f"),Object(l["a"])(xt,bt,gt,!1,null,"08104a26",null)),wt=kt.exports,Ct=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Title",{attrs:{text:"订单列表"}}),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{prop:"id",label:"#",width:"50"}}),a("el-table-column",{attrs:{width:"600"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-table",{attrs:{data:e.row.goodsList}},[a("el-table-column",{attrs:{prop:"name",label:"商品",width:"400"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"goods"},[a("div",{staticClass:"img"},[a("img",{attrs:{src:e.row.img_md}})]),a("div",{staticClass:"name"},[a("span",[t._v(t._s(e.row.name))])])])]}}],null,!0)}),a("el-table-column",{attrs:{prop:"goods_price",label:"单价"}}),a("el-table-column",{attrs:{prop:"goods_num",label:"数量"}})],1)]}}])}),a("el-table-column",{attrs:{prop:"payment",label:"付款总额"}}),a("el-table-column",{attrs:{prop:"create_time",sortable:"",label:"下单时间",width:"180"}}),a("el-table-column",{attrs:{prop:"status",sortable:"",label:"状态"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-edit",size:"small"}})]}}])})],1)],1)},yt=[],$t={components:{Title:mt},data:function(){return{tableData:[]}},created:function(){var t=this;Y.loadList({status:"all"}).then(function(e){e.status&&(e.data.forEach(function(t){t.create_time=new Date(t.create_time).toLocaleString()}),t.tableData=e.data)})},methods:{}},Mt=$t,jt=(a("c0fc"),Object(l["a"])(Mt,Ct,yt,!1,null,"4cb57cf3",null)),St=jt.exports,Ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",{staticClass:"container"},[a("el-header",[a("HeaderBar")],1),a("el-container",[a("LeftMenu"),a("el-main",[a("router-view")],1)],1)],1)},Et=[],Ft=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"clearfix"},[r("img",{staticClass:"am-text-middle",attrs:{src:a("d742"),height:"40"}}),r("i",{staticClass:"el-icon-menu am-text-middle am-margin-left-xl",on:{click:t.collapseHandle}}),r("div",{staticClass:"pull-right"},[r("el-dropdown",{staticClass:"white",attrs:{trigger:"click"}},[r("span",{staticClass:"am-text-middle am-margin-right-sm"},[t._v("\n\t\t\t\t"+t._s(t.nickname)+"\n\t\t\t")]),r("img",{staticClass:"am-text-middle",attrs:{width:"20",src:t.avatar}}),r("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[r("el-dropdown-item",[t._v("消息")]),r("el-dropdown-item",[t._v("设置")]),r("el-dropdown-item",[t._v("退出")])],1)],1)],1)])},Dt=[],Rt=a("2f62"),Pt={data:function(){return{}},created:function(){this.getUserInfo()},computed:Object(f["a"])({},Object(Rt["b"])("User",["nickname","avatar"])),methods:{collapseHandle:function(){this.$store.commit("Menu/toggleMenu")},getUserInfo:function(){this.$store.dispatch("User/GetUserInfo",{uid:sessionStorage.uid})}}},It=Pt,Ut=(a("3191"),Object(l["a"])(It,Ft,Dt,!1,null,"6020414b",null)),Nt=Ut.exports,At=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-menu",{attrs:{collapse:t.isCollapse,"default-openeds":["1"],"background-color":"#545c64",router:"","text-color":"#fff","active-text-color":"#ffd04b"}},[a("el-submenu",{attrs:{index:"1"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-s-goods"}),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("商品管理")])]),a("el-menu-item",{attrs:{index:"/goods/category"}},[t._v("商品分类")]),a("el-menu-item",{attrs:{index:"/goods/release"}},[t._v("发布商品")]),a("el-menu-item",{attrs:{index:"/goods/list"}},[t._v("商品列表")])],2),1==t.role||2==t.role?a("el-submenu",{attrs:{index:"2"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-user-solid"}),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("用户管理")])]),a("el-menu-item",{attrs:{index:"/user/list"}},[t._v("用户列表")])],2):t._e(),a("el-submenu",{attrs:{index:"3"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-s-order"}),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("订单管理")])]),a("el-menu-item",{attrs:{index:"/order/list"}},[t._v("订单列表")])],2),a("el-submenu",{attrs:{index:"4"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-s-tools"}),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("账户设置")])]),a("el-menu-item",{attrs:{index:"/user/info"}},[t._v("账户信息")])],2),a("el-submenu",{attrs:{index:"5"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-set-up"}),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("权限设置")])]),1==t.role?a("el-menu-item",{attrs:{index:"/auth/role"}},[t._v("用户角色")]):t._e(),1==t.role?a("el-menu-item",{attrs:{index:"/auth/menu"}},[t._v("菜单权限")]):t._e()],2)],1)},Vt=[],Ht={computed:Object(f["a"])({},Object(Rt["c"])({isCollapse:function(t){return t.Menu.isCollapse}}),Object(Rt["b"])({role:"User/role"}))},Lt=Ht,zt=Object(l["a"])(Lt,At,Vt,!1,null,null,null),Bt=zt.exports,Tt={components:{HeaderBar:Nt,LeftMenu:Bt}},Gt=Tt,qt=(a("ca9c"),Object(l["a"])(Gt,Ot,Et,!1,null,null,null)),Jt=qt.exports,Zt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Title",{attrs:{text:"商品分类"}}),a("el-tree",{ref:"tree",attrs:{"default-expanded-keys":[1],lazy:"","node-key":"id",load:t.loadNode,props:t.defaultProps},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.node,n=e.data;return a("div",{staticClass:"node-box"},[a("span",{staticClass:"node-name"},[t._v(t._s(r.label))]),a("span",{staticClass:"node-action"},[a("el-button",{attrs:{type:"text",size:"mini",disabled:1==n.id},on:{click:function(e){return e.stopPropagation(),t.openEditModal(r,n)}}},[t._v("\n\t\t\t\t\t\t编辑\n\t\t\t\t\t")]),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return e.stopPropagation(),t.openAddModal(r,n)}}},[t._v("\n\t\t\t\t\t\t添加\n\t\t\t\t\t")]),a("el-button",{attrs:{type:"text",size:"mini",disabled:1==n.id},on:{click:function(e){return e.stopPropagation(),t.openDeleteModal(r,n)}}},[t._v("\n\t\t\t\t\t\t删除\n\t\t\t\t\t")])],1)])}}])}),a("el-dialog",{attrs:{title:"编辑节点",visible:t.EditModalVisible},on:{"update:visible":function(e){t.EditModalVisible=e}}},[a("el-form",{attrs:{"label-width":"80px","label-position":"left"}},[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.editForm.name,callback:function(e){t.$set(t.editForm,"name",e)},expression:"editForm.name"}})],1),a("el-form-item",{attrs:{label:"图片"}},[a("el-upload",{staticClass:"photo-uploader",attrs:{action:"/api/upload/common/",headers:t.headers,"on-success":t.editUploadSuccess,"before-upload":t.beforeUpload,"show-file-list":!1}},[a("div",{staticClass:"el-upload"},[t.editForm.img?a("img",{staticClass:"photo",attrs:{src:t.editForm.img}}):a("i",{staticClass:"el-icon-plus photo-uploader-icon"})])])],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.EditModalVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.UpdateNodeHandle}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"添加节点",visible:t.AddModalVisible},on:{"update:visible":function(e){t.AddModalVisible=e}}},[a("el-form",{attrs:{"label-width":"80px","label-position":"left"}},[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.addForm.name,callback:function(e){t.$set(t.addForm,"name",e)},expression:"addForm.name"}})],1),a("el-form-item",{attrs:{label:"图片"}},[a("el-upload",{staticClass:"photo-uploader",attrs:{action:"/api/upload/common/",headers:t.headers,"on-success":t.addUploadSuccess,"before-upload":t.beforeUpload,"show-file-list":!1}},[a("div",{staticClass:"el-upload"},[t.addForm.img?a("img",{staticClass:"photo",attrs:{src:t.addForm.img}}):a("i",{staticClass:"el-icon-plus photo-uploader-icon"})])])],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.AddModalVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.AddNodeHandle}},[t._v("确 定")])],1)],1)],1)},Kt=[],Qt={components:{Title:mt},data:function(){return{defaultProps:{label:"name"},headers:{Authorization:"Bearer ".concat(sessionStorage.token)},EditModalVisible:!1,editForm:{name:"",pId:"",img:""},AddModalVisible:!1,addForm:{name:"",pId:"",img:""},currentNodeData:"",currentNode:""}},methods:{loadNode:function(t,e){if(0===t.level)return e([{name:"全部分类",id:1,img:""}]);V.load({pId:t.data.id}).then(function(t){e(t.data)})},openEditModal:function(t,e){this.EditModalVisible=!0,this.editForm=Object(f["a"])({},e),this.currentNode=t},UpdateNodeHandle:function(){var t=this;V.update(Object(f["a"])({},this.editForm)).then(function(e){e.status&&(t.$message.success(e.msg),t.EditModalVisible=!1,t.currentNode.data=Object(f["a"])({},t.editForm))})},openAddModal:function(t,e){this.addForm.pId=e.id,this.AddModalVisible=!0,this.currentNodeData=e},AddNodeHandle:function(){var t=this;V.add(Object(f["a"])({},this.addForm)).then(function(e){if(e.status){t.$message.success(e.msg),t.AddModalVisible=!1;var a=t.currentNodeData,r=Object(f["a"])({},t.addForm,e.data);a.children||t.$set(a,"children",[]),a.children.push(r)}else t.$message.error(e.msg)})},openDeleteModal:function(t,e){var a=this;this.$msgbox({type:"warning",title:"",message:"此操作将永久删除该分类, 是否继续?"}).then(function(){V.remove({id:e.id}).then(function(e){e.status&&(t.remove(),a.$message.success("删除成功!"))})})},beforeUpload:function(t){var e="image/jpeg"===t.type||"image/png",a=t.size/1024/1024<2;return e||this.$message.error("上传头像图片只能是 JPG/PNG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),e&&a},addUploadSuccess:function(t,e){this.addForm.img=t.src},editUploadSuccess:function(t,e){this.editForm.img=t.src}}},Wt=Qt,Xt=(a("a687"),Object(l["a"])(Wt,Zt,Kt,!1,null,"dc385c7e",null)),Yt=Xt.exports,te=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Title",{attrs:{text:"商品列表"}}),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{fixed:"",label:"商品名称",width:"600"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"goods"},[a("div",{staticClass:"img"},[a("img",{attrs:{src:e.row.img_md}})]),a("div",{staticClass:"name"},[a("span",[t._v(t._s(e.row.name))]),a("br"),a("span",[t._v("商品货号："+t._s(e.row.articleNo))])])])]}}])}),a("el-table-column",{attrs:{prop:"price",label:"价格"}}),a("el-table-column",{attrs:{prop:"inventory",label:"库存"}}),a("el-table-column",{attrs:{prop:"create_time",label:"发布时间"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("router-link",{staticClass:"am-margin-right-sm",attrs:{to:{name:"GoodsEdit",params:{id:e.row.id}}}},[a("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-edit",size:"small"}})],1),a("el-button",{attrs:{icon:"el-icon-delete",plain:"",type:"danger"},on:{click:function(a){return t.showDeleteModal(e.row.id)}}})]}}])})],1)],1)},ee=[],ae={components:{Title:mt},data:function(){return{tableData:[]}},created:function(){this.getGoodsList()},methods:{getGoodsList:function(){var t=this;G.list({pageSize:100}).then(function(e){e.status&&(e.data.forEach(function(t,e){t.create_time=new Date(t.create_time).toLocaleString()}),t.tableData=e.data)})},showDeleteModal:function(t){var e=this;this.$confirm("确定要删除该商品吗？删除之后无法恢复！！！",{type:"warning"}).then(function(){console.log(t)}).catch(function(){e.$message({type:"info",message:"已取消删除"})})}}},re=ae,ne=(a("4ce0"),Object(l["a"])(re,te,ee,!1,null,"149c0fec",null)),se=ne.exports,oe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Title",{attrs:{text:"发布新商品"}}),a("el-form",{ref:"form",attrs:{model:t.form,"label-position":"left","label-width":"120px"}},[a("el-form-item",{attrs:{label:"商品分类"}},[a("el-select",{attrs:{placeholder:"请选择分类"},model:{value:t.form.cate_1st,callback:function(e){t.$set(t.form,"cate_1st",e)},expression:"form.cate_1st"}},t._l(t.cate_1st_options,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1),a("el-select",{attrs:{placeholder:"请选择分类"},model:{value:t.form.cate_2nd,callback:function(e){t.$set(t.form,"cate_2nd",e)},expression:"form.cate_2nd"}},t._l(t.cate_2nd_options,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1),a("el-select",{attrs:{placeholder:"请选择分类"},model:{value:t.form.cate_3rd,callback:function(e){t.$set(t.form,"cate_3rd",e)},expression:"form.cate_3rd"}},t._l(t.cate_3rd_options,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1),a("el-form-item",{attrs:{label:"商品名称"}},[a("el-col",{attrs:{span:14}},[a("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name","string"===typeof e?e.trim():e)},expression:"form.name"}})],1),a("el-col",{staticClass:"tip",attrs:{span:24}},[t._v("商品标题名称长度至少3个字符，最长200个汉字")])],1),a("el-form-item",{attrs:{label:"商品卖点"}},[a("el-col",{attrs:{span:14}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.form.hotPoint,callback:function(e){t.$set(t.form,"hotPoint","string"===typeof e?e.trim():e)},expression:"form.hotPoint"}})],1),a("el-col",{staticClass:"tip",attrs:{span:24}},[t._v("商品卖点不能超过140个汉字")])],1),a("el-form-item",{attrs:{label:"商品价格"}},[a("el-col",{attrs:{span:3}},[a("el-input",{model:{value:t.form.price,callback:function(e){t.$set(t.form,"price",t._n("string"===typeof e?e.trim():e))},expression:"form.price"}},[a("template",{slot:"append"},[t._v("元")])],2)],1),a("el-col",{staticClass:"tip",attrs:{span:24}},[t._v("价格必须是0-999999之间的数字，且不能高于市场价")]),a("el-col",{staticClass:"tip",attrs:{span:24}},[t._v("此价格为商品实际销售价格，如果商品存在规格，改价格显示最低价格")])],1),a("el-form-item",{attrs:{label:"市场价"}},[a("el-col",{attrs:{span:3}},[a("el-input",{model:{value:t.form.marketPrice,callback:function(e){t.$set(t.form,"marketPrice",t._n("string"===typeof e?e.trim():e))},expression:"form.marketPrice"}},[a("template",{slot:"append"},[t._v("元")])],2)],1),a("el-col",{staticClass:"tip",attrs:{span:24}},[t._v("价格必须是0-999999之间的数字，此价格仅为市场参考价，请根据实际情况认真填写")])],1),a("el-form-item",{attrs:{label:"成本价"}},[a("el-col",{attrs:{span:3}},[a("el-input",{model:{value:t.form.cost,callback:function(e){t.$set(t.form,"cost",t._n("string"===typeof e?e.trim():e))},expression:"form.cost"}},[a("template",{slot:"append"},[t._v("元")])],2)],1),a("el-col",{staticClass:"tip",attrs:{span:24}},[t._v("价格必须是0-999999之间的数字，此价格为商户对所销售的商品的实际成本价进行备注记录，非必填选项，不会在前台销售页面中显示")])],1),a("el-form-item",{attrs:{label:"折扣"}},[a("el-col",{attrs:{span:3}},[a("el-input",{attrs:{readonly:""},model:{value:t.discount,callback:function(e){t.discount=e},expression:"discount"}},[a("template",{slot:"append"},[t._v("折")])],2)],1),a("el-col",{staticClass:"tip",attrs:{span:24}},[t._v("根据销售价与市场价比例自动生成不需要编辑")])],1),a("el-form-item",{attrs:{label:"商品库存"}},[a("el-col",{attrs:{span:3}},[a("el-input",{model:{value:t.form.inventory,callback:function(e){t.$set(t.form,"inventory",t._n("string"===typeof e?e.trim():e))},expression:"form.inventory"}},[a("template",{slot:"append"},[t._v("件")])],2)],1),a("el-col",{staticClass:"tip",attrs:{span:24}},[t._v("价格必须是0-999999之间的整数")]),a("el-col",{staticClass:"tip",attrs:{span:24}},[t._v("若启动了库存配置，则系统自动计算商品的总数，此处无需卖家填写")])],1),a("el-form-item",{attrs:{label:"商品货号"}},[a("el-col",{attrs:{span:3}},[a("el-input",{model:{value:t.form.articleNo,callback:function(e){t.$set(t.form,"articleNo","string"===typeof e?e.trim():e)},expression:"form.articleNo"}})],1),a("el-col",{staticClass:"tip",attrs:{span:24}},[t._v("商品货号是商家管理商品的编号，买家不可见")]),a("el-col",{staticClass:"tip",attrs:{span:24}},[t._v("最多输入20个字符，只支持输入中文、字母、数字、_、/、-和小数点")])],1),a("el-form-item",{attrs:{label:"商品主图"}},[a("el-upload",{attrs:{limit:1,"list-type":"picture-card",action:"/api/upload/goods/",headers:t.headers,"before-upload":t.handleBeforeUpload,"on-success":t.handleMainSuccess,"before-remove":t.handleMainBeforeRemove,"on-exceed":t.handleMainExceed,"on-error":t.handleError,"on-preview":t.handleCardPreview}},[a("i",{staticClass:"el-icon-plus"})]),a("el-col",{staticClass:"tip",attrs:{span:24}},[t._v("上传商品默认主图，如多规格时将默认图片或分规格上传规格主图，支持jpg、if、png格式上传或从图片空间选中，建议使用尺寸\n\t\t\t\t800*800像素以上，大小不超过1M的正方形图片，上传后的图片将自动保存在图片空间的默认分类中")])],1),a("el-form-item",{attrs:{label:"商品轮播图"}},[a("el-upload",{attrs:{limit:6,"list-type":"picture-card",action:"/api/upload/slider/",headers:t.headers,"before-upload":t.handleBeforeUpload,"on-success":t.handleSliderSuccess,"on-exceed":t.handleSliderExceed,"before-remove":t.handleSliderBeforeRemove,"on-error":t.handleError,"on-preview":t.handleCardPreview}},[a("i",{staticClass:"el-icon-plus"})]),a("el-col",{staticClass:"tip",attrs:{span:24}},[t._v("上传商品默认主图，如多规格时将默认图片或分规格上传规格主图，支持jpg、if、png格式上传或从图片空间选中，建议使用尺寸\n\t\t\t\t800*800像素以上，大小不超过1M的正方形图片，上传后的图片将自动保存在图片空间的默认分类中")])],1),a("div",{staticClass:"section-title"},[t._v("商品详情描述")]),a("el-form-item",{attrs:{label:"商品品牌"}},[a("el-col",{attrs:{span:14}},[a("el-input",{model:{value:t.form.brand,callback:function(e){t.$set(t.form,"brand","string"===typeof e?e.trim():e)},expression:"form.brand"}})],1)],1),a("el-form-item",{attrs:{label:"商品描述"}},[a("div",{ref:"toolbar",staticClass:"w-e-toolbar"}),a("div",{ref:"editor",staticClass:"w-e-text-container"})]),a("div",{staticClass:"section-title"},[t._v("商品物流信息")]),a("el-form-item",{attrs:{label:"所在地"}},[a("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:t.form.province,callback:function(e){t.$set(t.form,"province",e)},expression:"form.province"}},[a("el-option",{attrs:{label:"区域一",value:"shanghai"}}),a("el-option",{attrs:{label:"区域二",value:"beijing"}}),a("el-option",{attrs:{label:"区域三",value:"beijing"}})],1),a("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:t.form.city,callback:function(e){t.$set(t.form,"city",e)},expression:"form.city"}},[a("el-option",{attrs:{label:"区域一",value:"shanghai"}}),a("el-option",{attrs:{label:"区域二",value:"beijing"}}),a("el-option",{attrs:{label:"区域三",value:"beijing"}})],1),a("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:t.form.area,callback:function(e){t.$set(t.form,"area",e)},expression:"form.area"}},[a("el-option",{attrs:{label:"区域一",value:"shanghai"}}),a("el-option",{attrs:{label:"区域二",value:"beijing"}}),a("el-option",{attrs:{label:"区域三",value:"beijing"}})],1)],1),a("el-form-item",{attrs:{label:"运费"}},[a("el-col",{attrs:{span:3}},[a("el-input",{model:{value:t.form.freight,callback:function(e){t.$set(t.form,"freight","string"===typeof e?e.trim():e)},expression:"form.freight"}},[a("template",{slot:"append"},[t._v("元")])],2)],1),a("el-col",{staticClass:"tip",attrs:{span:24}},[t._v("运费设为0，前台商品将显示免运费")])],1),a("el-form-item",[a("el-button",{attrs:{type:"success"},on:{click:t.releaseHandle}},[t._v("提交")])],1)],1),a("el-dialog",{attrs:{width:"30%",visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)},ie=[],le=a("75fc"),ce=(a("20d6"),a("96cf"),a("3b8d")),ue=a("1a0b"),de=a.n(ue),me={components:{Title:mt},data:function(){return{dialogImageUrl:"",dialogVisible:!1,headers:{Authorization:"Bearer ".concat(sessionStorage.token)},form:{cate_1st:"",cate_2nd:"",cate_3rd:"",hotPoint:"",name:"",price:"",marketPrice:"",cost:"",discount:"",inventory:"",articleNo:"",img_lg:"",img_md:"",slider:"",brand:"",detail:"",freight:"0",province:"山东省",city:"青岛市",area:"城阳区"},cate_1st_options:[],cate_2nd_options:[],cate_3rd_options:[]}},computed:{discount:function(){var t=(this.form.price/this.form.marketPrice*10).toFixed(2);switch(this.form.discount=t,t){case"NaN":return"";case"Infinity":return"";default:return t}}},mounted:function(){var t=this,e=new de.a(this.$refs.toolbar,this.$refs.editor);e.customConfig.zIndex=100,e.customConfig.uploadImgServer="/api/upload/editor/",e.customConfig.uploadFileName="file",e.customConfig.uploadImgHeaders={Authorization:"Bearer ".concat(sessionStorage.token)},e.customConfig.onchange=function(e){t.form.detail=e},e.create()},created:function(){this.cateChangeHandle(1,"cate_1st")},watch:{"form.cate_1st":function(t,e){this.cateChangeHandle(t,"cate_2nd")},"form.cate_2nd":function(t,e){this.cateChangeHandle(t,"cate_3rd")}},methods:{cateChangeHandle:function(t,e){var a=this;if(!t)return!1;this.getOptions(t).then(function(t){if(a[e+"_options"]=t,0==t.length)return a.form[e]="",!1;a.form[e]=t[0].id})},getOptions:function(){var t=Object(ce["a"])(regeneratorRuntime.mark(function t(e){var a,r,n,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,V.load({pId:e});case 2:if(a=t.sent,r=a.status,n=a.data,s=a.msg,!r){t.next=10;break}return t.abrupt("return",Promise.resolve(n));case 10:this.$message.error(s);case 11:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),handleMainSuccess:function(t,e,a){t.status&&(this.form.img_lg=t.lgImg,this.form.img_md=t.mdImg)},handleError:function(t,e,a){var r=t.status,n=t.message;switch(r){case 401:this.$message.error("错误:401,Token失效,请重新登录!");break;case 400:n=JSON.parse(n),this.$message.error("错误:400,".concat(n.msg));break;default:this.$message.error("错误:".concat(r,",").concat(n,"!"));break}},handleBeforeUpload:function(t){var e=/^image\/(jpe?g|png)$/,a=e.test(t.type),r=t.size/1024/1024<2;return a||this.$message.error("上传头像图片只能是 JPG/PNG 格式!"),r||this.$message.error("上传头像图片大小不能超过 2MB!"),a&&r},handleMainBeforeRemove:function(){var t=Object(ce["a"])(regeneratorRuntime.mark(function t(e,a){var r,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,et.deleteImage({src:"."+e.response.lgImg});case 3:return r=t.sent,t.next=6,et.deleteImage({src:"."+e.response.mdImg});case 6:if(n=t.sent,!r.status||!n.status){t.next=13;break}return this.form.img_lg="",this.form.img_md="",t.abrupt("return",!0);case 13:return t.abrupt("return",!1);case 14:t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](0),this.$message.error(t.t0);case 19:case"end":return t.stop()}},t,this,[[0,16]])}));function e(e,a){return t.apply(this,arguments)}return e}(),handleCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},handleMainExceed:function(t,e){this.$message.warning("当前限制选择 1 个文件，本次选择了 ".concat(t.length," 个文件，共选择了 ").concat(t.length+e.length," 个文件"))},handleSliderSuccess:function(t,e,a){t.status&&(this.form.slider=this.convertFileList(a))},handleSliderExceed:function(t,e){this.$message.warning("当前限制选择 6 个文件，本次选择了 ".concat(t.length," 个文件，共选择了 ").concat(t.length+e.length," 个文件"))},handleSliderBeforeRemove:function(){var t=Object(ce["a"])(regeneratorRuntime.mark(function t(e,a){var r,n,s,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,et.deleteImage({src:"."+e.response.src});case 2:if(r=t.sent,n=r.status,!n){t.next=12;break}return s=a.findIndex(function(t){return t.url==e.response.src}),o=Object(le["a"])(a),o.splice(s,1),this.form.slider=this.convertFileList(o),t.abrupt("return",!0);case 12:return t.abrupt("return",!1);case 13:case"end":return t.stop()}},t,this)}));function e(e,a){return t.apply(this,arguments)}return e}(),convertFileList:function(t){var e=[];return t.forEach(function(t,a){e.push(t.response.src)}),e.toString()},releaseHandle:function(){var t=Object(ce["a"])(regeneratorRuntime.mark(function t(){var e,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,G.release(this.form);case 2:e=t.sent,a=e.status,a&&this.$message.success("发布商品成功！");case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()}},pe=me,fe=(a("ca0b"),Object(l["a"])(pe,oe,ie,!1,null,"4c63c771",null)),he=fe.exports,ve=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Title",{attrs:{text:"编辑商品"}}),a("el-form",{ref:"form",attrs:{model:t.form,"label-position":"left","label-width":"120px"}},[a("el-form-item",{attrs:{label:"商品分类"}},[a("el-select",{attrs:{placeholder:"请选择分类"},on:{change:t.cate_1st_handle},model:{value:t.form.cate_1st,callback:function(e){t.$set(t.form,"cate_1st",e)},expression:"form.cate_1st"}},t._l(t.cate_1st_options,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1),a("el-select",{attrs:{placeholder:"请选择分类"},on:{change:t.cate_2nd_handle},model:{value:t.form.cate_2nd,callback:function(e){t.$set(t.form,"cate_2nd",e)},expression:"form.cate_2nd"}},t._l(t.cate_2nd_options,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1),a("el-select",{attrs:{placeholder:"请选择分类"},model:{value:t.form.cate_3rd,callback:function(e){t.$set(t.form,"cate_3rd",e)},expression:"form.cate_3rd"}},t._l(t.cate_3rd_options,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1),a("el-form-item",{attrs:{label:"商品名称"}},[a("el-col",{attrs:{span:14}},[a("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name","string"===typeof e?e.trim():e)},expression:"form.name"}})],1),a("el-col",{staticClass:"tip",attrs:{span:24}},[t._v("商品标题名称长度至少3个字符，最长200个汉字")])],1),a("el-form-item",{attrs:{label:"商品卖点"}},[a("el-col",{attrs:{span:14}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.form.hotPoint,callback:function(e){t.$set(t.form,"hotPoint","string"===typeof e?e.trim():e)},expression:"form.hotPoint"}})],1),a("el-col",{staticClass:"tip",attrs:{span:24}},[t._v("商品卖点不能超过140个汉字")])],1),a("el-form-item",{attrs:{label:"商品价格"}},[a("el-col",{attrs:{span:3}},[a("el-input",{model:{value:t.form.price,callback:function(e){t.$set(t.form,"price",t._n("string"===typeof e?e.trim():e))},expression:"form.price"}},[a("template",{slot:"append"},[t._v("元")])],2)],1),a("el-col",{staticClass:"tip",attrs:{span:24}},[t._v("价格必须是0-999999之间的数字，且不能高于市场价")]),a("el-col",{staticClass:"tip",attrs:{span:24}},[t._v("此价格为商品实际销售价格，如果商品存在规格，改价格显示最低价格")])],1),a("el-form-item",{attrs:{label:"市场价"}},[a("el-col",{attrs:{span:3}},[a("el-input",{model:{value:t.form.marketPrice,callback:function(e){t.$set(t.form,"marketPrice",t._n("string"===typeof e?e.trim():e))},expression:"form.marketPrice"}},[a("template",{slot:"append"},[t._v("元")])],2)],1),a("el-col",{staticClass:"tip",attrs:{span:24}},[t._v("价格必须是0-999999之间的数字，此价格仅为市场参考价，请根据实际情况认真填写")])],1),a("el-form-item",{attrs:{label:"成本价"}},[a("el-col",{attrs:{span:3}},[a("el-input",{model:{value:t.form.cost,callback:function(e){t.$set(t.form,"cost",t._n("string"===typeof e?e.trim():e))},expression:"form.cost"}},[a("template",{slot:"append"},[t._v("元")])],2)],1),a("el-col",{staticClass:"tip",attrs:{span:24}},[t._v("价格必须是0-999999之间的数字，此价格为商户对所销售的商品的实际成本价进行备注记录，非必填选项，不会在前台销售页面中显示")])],1),a("el-form-item",{attrs:{label:"折扣"}},[a("el-col",{attrs:{span:3}},[a("el-input",{attrs:{readonly:""},model:{value:t.discount,callback:function(e){t.discount=e},expression:"discount"}},[a("template",{slot:"append"},[t._v("折")])],2)],1),a("el-col",{staticClass:"tip",attrs:{span:24}},[t._v("根据销售价与市场价比例自动生成不需要编辑")])],1),a("el-form-item",{attrs:{label:"商品库存"}},[a("el-col",{attrs:{span:3}},[a("el-input",{model:{value:t.form.inventory,callback:function(e){t.$set(t.form,"inventory",t._n("string"===typeof e?e.trim():e))},expression:"form.inventory"}},[a("template",{slot:"append"},[t._v("件")])],2)],1),a("el-col",{staticClass:"tip",attrs:{span:24}},[t._v("价格必须是0-999999之间的整数")]),a("el-col",{staticClass:"tip",attrs:{span:24}},[t._v("若启动了库存配置，则系统自动计算商品的总数，此处无需卖家填写")])],1),a("el-form-item",{attrs:{label:"商品货号"}},[a("el-col",{attrs:{span:3}},[a("el-input",{model:{value:t.form.articleNo,callback:function(e){t.$set(t.form,"articleNo","string"===typeof e?e.trim():e)},expression:"form.articleNo"}})],1),a("el-col",{staticClass:"tip",attrs:{span:24}},[t._v("商品货号是商家管理商品的编号，买家不可见")]),a("el-col",{staticClass:"tip",attrs:{span:24}},[t._v("最多输入20个字符，只支持输入中文、字母、数字、_、/、-和小数点")])],1),a("el-form-item",{attrs:{label:"商品主图"}},[a("el-upload",{attrs:{limit:1,action:"/api/upload/goods/","file-list":t.mainFileList,headers:t.headers,"list-type":"picture-card","before-upload":t.handleBeforeUpload,"on-success":t.handleMainSuccess,"before-remove":t.handleMainBeforeRemove,"on-exceed":t.handleMainExceed,"on-error":t.handleError,"on-preview":t.handleCardPreview}},[a("i",{staticClass:"el-icon-plus"})]),a("el-col",{staticClass:"tip",attrs:{span:24}},[t._v("\n                上传商品默认主图，如多规格时将默认图片或分规格上传规格主图，支持jpg、if、png格式上传或从图片空间选中，建议使用尺寸\n                800*800像素以上，大小不超过1M的正方形图片，上传后的图片将自动保存在图片空间的默认分类中\n            ")])],1),a("el-form-item",{attrs:{label:"商品轮播图"}},[a("el-upload",{attrs:{limit:6,action:"/api/upload/slider/","file-list":t.sliderFileList,headers:t.headers,"list-type":"picture-card","before-upload":t.handleBeforeUpload,"on-success":t.handleSliderSuccess,"on-exceed":t.handleSliderExceed,"before-remove":t.handleSliderBeforeRemove,"on-error":t.handleError,"on-preview":t.handleCardPreview}},[a("i",{staticClass:"el-icon-plus"})]),a("el-col",{staticClass:"tip",attrs:{span:24}},[t._v("\n                上传商品默认主图，如多规格时将默认图片或分规格上传规格主图，支持jpg、if、png格式上传或从图片空间选中，建议使用尺寸\n                800*800像素以上，大小不超过1M的正方形图片，上传后的图片将自动保存在图片空间的默认分类中\n            ")])],1),a("div",{staticClass:"section-title"},[t._v("商品详情描述")]),a("el-form-item",{attrs:{label:"商品品牌"}},[a("el-col",{attrs:{span:14}},[a("el-input",{model:{value:t.form.brand,callback:function(e){t.$set(t.form,"brand","string"===typeof e?e.trim():e)},expression:"form.brand"}})],1)],1),a("el-form-item",{attrs:{label:"商品描述"}},[a("div",{ref:"toolbar",staticClass:"w-e-toolbar"}),a("div",{ref:"editor",staticClass:"w-e-text-container"})]),a("div",{staticClass:"section-title"},[t._v("商品物流信息")]),a("el-form-item",{attrs:{label:"所在地"}},[a("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:t.form.province,callback:function(e){t.$set(t.form,"province",e)},expression:"form.province"}},[a("el-option",{attrs:{label:"区域一",value:"shanghai"}}),a("el-option",{attrs:{label:"区域二",value:"beijing"}}),a("el-option",{attrs:{label:"区域三",value:"beijing"}})],1),a("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:t.form.city,callback:function(e){t.$set(t.form,"city",e)},expression:"form.city"}},[a("el-option",{attrs:{label:"区域一",value:"shanghai"}}),a("el-option",{attrs:{label:"区域二",value:"beijing"}}),a("el-option",{attrs:{label:"区域三",value:"beijing"}})],1),a("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:t.form.area,callback:function(e){t.$set(t.form,"area",e)},expression:"form.area"}},[a("el-option",{attrs:{label:"区域一",value:"shanghai"}}),a("el-option",{attrs:{label:"区域二",value:"beijing"}}),a("el-option",{attrs:{label:"区域三",value:"beijing"}})],1)],1),a("el-form-item",{attrs:{label:"运费"}},[a("el-col",{attrs:{span:3}},[a("el-input",{model:{value:t.form.freight,callback:function(e){t.$set(t.form,"freight","string"===typeof e?e.trim():e)},expression:"form.freight"}},[a("template",{slot:"append"},[t._v("元")])],2)],1),a("el-col",{staticClass:"tip",attrs:{span:24}},[t._v("运费设为0，前台商品将显示免运费")])],1),a("el-form-item",[a("el-button",{attrs:{type:"success"},on:{click:t.editHandle}},[t._v("提交")])],1)],1),a("el-dialog",{attrs:{width:"30%",visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)},be=[],ge=(a("28a5"),{props:["id"],components:{Title:mt},data:function(){return{dialogImageUrl:"",dialogVisible:!1,headers:{Authorization:"Bearer ".concat(sessionStorage.token)},form:{cate_1st:"",cate_2nd:"",cate_3rd:"",hotPoint:"",name:"",price:"",marketPrice:"",cost:"",discount:"",inventory:"",articleNo:"",img_lg:"",img_md:"",slider:"",brand:"",detail:"",freight:"0",province:"山东省",city:"青岛市",area:"城阳区"},cate_1st_options:[],cate_2nd_options:[],cate_3rd_options:[],mainFileList:[],sliderFileList:[]}},computed:{discount:function(){var t=(this.form.price/this.form.marketPrice*10).toFixed(2);switch(this.form.discount=t,t){case"NaN":return"";case"Infinity":return"";default:return t}}},mounted:function(){var t=Object(ce["a"])(regeneratorRuntime.mark(function t(){var e,a,r,n,s=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getDetail();case 2:e=t.sent,a=new de.a(this.$refs.toolbar,this.$refs.editor),a.customConfig.zIndex=100,a.customConfig.uploadImgServer="/api/upload/editor/",a.customConfig.uploadFileName="file",a.customConfig.uploadImgHeaders={Authorization:"Bearer ".concat(sessionStorage.token)},a.customConfig.onchange=function(t){s.form.detail=t},a.create(),a.txt.html(e.detail),this.cateChangeHandle(1,"cate_1st",!1),this.cateChangeHandle(e.cate_1st,"cate_2nd",!1),this.cateChangeHandle(e.cate_2nd,"cate_3rd",!1),e.img_md&&(this.mainFileList=[{name:"1.jpg",url:e.img_md}]),r=e.slider.split(","),n=r.map(function(t,e){var a={};return a.url=t,a.name=e+".jpg",a.response={src:t},a}),this.sliderFileList=n;case 18:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),methods:{getDetail:function(){var t=Object(ce["a"])(regeneratorRuntime.mark(function t(){var e,a,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,G.getDetail({id:this.id});case 2:if(e=t.sent,a=e.status,r=e.data,!a){t.next=9;break}return this.form=r,this.form.id=this.id,t.abrupt("return",Promise.resolve(r));case 9:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),cate_1st_handle:function(t){this.cateChangeHandle(t,"cate_2nd")},cate_2nd_handle:function(t){this.cateChangeHandle(t,"cate_3rd")},cateChangeHandle:function(){var t=Object(ce["a"])(regeneratorRuntime.mark(function t(e,a){var r,n,s=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r=!(s.length>2&&void 0!==s[2])||s[2],t.next=3,this.getOptions(e);case 3:if(n=t.sent,this[a+"_options"]=n,0!==n.length){t.next=8;break}return this.form[a]="",t.abrupt("return",!1);case 8:r&&(this.form[a]=n[0].id);case 9:case"end":return t.stop()}},t,this)}));function e(e,a){return t.apply(this,arguments)}return e}(),getOptions:function(){var t=Object(ce["a"])(regeneratorRuntime.mark(function t(e){var a,r,n,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,V.load({pId:e});case 2:if(a=t.sent,r=a.status,n=a.data,s=a.msg,!r){t.next=10;break}return t.abrupt("return",Promise.resolve(n));case 10:this.$message.error(s);case 11:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),handleMainSuccess:function(t,e,a){t.status&&(this.form.img_lg=t.lgImg,this.form.img_md=t.mdImg)},handleError:function(t,e,a){var r=t.status,n=t.message;switch(r){case 401:this.$message.error("错误:401,Token失效,请重新登录!");break;case 400:n=JSON.parse(n),this.$message.error("错误:400,".concat(n.msg));break;default:this.$message.error("错误:".concat(r,",").concat(n,"!"));break}},handleBeforeUpload:function(t){var e=/^image\/(jpe?g|png)$/,a=e.test(t.type),r=t.size/1024/1024<2;return a||this.$message.error("上传头像图片只能是 JPG/PNG 格式!"),r||this.$message.error("上传头像图片大小不能超过 2MB!"),a&&r},handleMainBeforeRemove:function(){var t=Object(ce["a"])(regeneratorRuntime.mark(function t(e,a){var r,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,et.deleteImage({src:"."+this.form.img_lg});case 3:return r=t.sent,t.next=6,et.deleteImage({src:"."+this.form.img_md});case 6:if(n=t.sent,!r.status||!n.status){t.next=13;break}return this.form.img_lg="",this.form.img_md="",t.abrupt("return",!0);case 13:return t.abrupt("return",!1);case 14:t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](0),this.$message.error(t.t0);case 19:case"end":return t.stop()}},t,this,[[0,16]])}));function e(e,a){return t.apply(this,arguments)}return e}(),handleCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},handleMainExceed:function(t,e){this.$message.warning("当前限制选择 1 个文件，本次选择了 ".concat(t.length," 个文件，共选择了 ").concat(t.length+e.length," 个文件"))},handleSliderSuccess:function(t,e,a){t.status&&(this.form.slider=this.convertFileList(a))},handleSliderExceed:function(t,e){this.$message.warning("当前限制选择 6 个文件，本次选择了 ".concat(t.length," 个文件，共选择了 ").concat(t.length+e.length," 个文件"))},handleSliderBeforeRemove:function(){var t=Object(ce["a"])(regeneratorRuntime.mark(function t(e,a){var r,n,s,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,et.deleteImage({src:"."+e.response.src});case 2:if(r=t.sent,n=r.status,!n){t.next=12;break}return s=a.findIndex(function(t){return t.url==e.response.src}),o=Object(le["a"])(a),o.splice(s,1),this.form.slider=this.convertFileList(o),t.abrupt("return",!0);case 12:return t.abrupt("return",!1);case 13:case"end":return t.stop()}},t,this)}));function e(e,a){return t.apply(this,arguments)}return e}(),convertFileList:function(t){var e=[];return t.forEach(function(t,a){e.push(t.response.src)}),e.toString()},editHandle:function(){var t=Object(ce["a"])(regeneratorRuntime.mark(function t(){var e,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,G.update(this.form);case 2:e=t.sent,a=e.status,a&&this.$message.success("更新商品成功！");case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()}}),_e=ge,xe=(a("2fd1"),Object(l["a"])(_e,ve,be,!1,null,"c937ffd0",null)),ke=xe.exports,we=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Title",{attrs:{text:"用户角色"}}),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:10}},[a("el-card",{staticClass:"role-card"},[a("div",{staticClass:"header",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("角色列表")]),a("el-button",{attrs:{plain:"",type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:function(e){t.AddModalVisible=!0}}},[t._v("添加角色\n                    ")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{prop:"id",label:"#"}}),a("el-table-column",{attrs:{label:"角色"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:1===e.row.id?"danger":""}},[t._v(t._s(e.row.name))])]}}])}),a("el-table-column",{attrs:{width:"180",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{disabled:1===e.row.id,type:"primary",plain:"",icon:"el-icon-edit"},on:{click:function(a){return t.openEditModal(e.row)}}}),a("el-button",{attrs:{disabled:1===e.row.id,type:"danger",plain:"",icon:"el-icon-delete"},on:{click:function(a){return t.openDeleteModal(e.row.id)}}}),a("router-link",{staticClass:"am-margin-left-sm",attrs:{to:{name:"RoleConfig",params:{id:e.row.id}}}},[a("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-setting"}})],1)]}}])})],1)],1)],1),a("el-col",{attrs:{span:14}},[a("router-view")],1)],1),a("el-dialog",{attrs:{title:"添加角色",visible:t.AddModalVisible},on:{"update:visible":function(e){t.AddModalVisible=e}}},[a("el-form",{attrs:{"label-width":"80px","label-position":"left"}},[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{model:{value:t.addForm.name,callback:function(e){t.$set(t.addForm,"name",e)},expression:"addForm.name"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.AddModalVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.addRoleHandle}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"编辑角色",visible:t.EditModalVisible},on:{"update:visible":function(e){t.EditModalVisible=e}}},[a("el-form",{attrs:{"label-width":"80px","label-position":"left"}},[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{model:{value:t.editForm.name,callback:function(e){t.$set(t.editForm,"name",e)},expression:"editForm.name"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.EditModalVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.updateRoleHandle}},[t._v("确 定")])],1)],1)],1)},Ce=[],ye={name:"Role",components:{Title:mt},data:function(){return{tableData:[],AddModalVisible:!1,addForm:{name:""},EditModalVisible:!1,editForm:{id:"",name:""}}},created:function(){this.loadRole()},methods:{loadRole:function(){var t=Object(ce["a"])(regeneratorRuntime.mark(function t(){var e,a,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,W.load();case 2:e=t.sent,a=e.status,r=e.data,a&&(this.tableData=r);case 6:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),addRoleHandle:function(){var t=Object(ce["a"])(regeneratorRuntime.mark(function t(){var e,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,W.add(Object(f["a"])({},this.addForm));case 2:e=t.sent,a=e.status,a&&(this.loadRole(),this.AddModalVisible=!1);case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),openEditModal:function(t){this.EditModalVisible=!0,this.editForm=Object(f["a"])({},t)},updateRoleHandle:function(){var t=Object(ce["a"])(regeneratorRuntime.mark(function t(){var e,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,W.update(Object(f["a"])({},this.editForm));case 2:e=t.sent,a=e.status,a&&(this.loadRole(),this.EditModalVisible=!1);case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),openDeleteModal:function(t){var e=this;this.$msgbox({type:"warning",title:"",message:"此操作将永久删除该角色及其关联账户, 是否继续？",showCancelButton:!0}).then(Object(ce["a"])(regeneratorRuntime.mark(function a(){var r,n;return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,W.remove({id:t});case 2:r=a.sent,n=r.status,n&&(e.loadRole(),e.$message.success("删除成功!"));case 5:case"end":return a.stop()}},a)})))}}},$e=ye,Me=(a("7e08"),Object(l["a"])($e,we,Ce,!1,null,"3520edfc",null)),je=Me.exports,Se=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Title",{attrs:{text:"菜单权限"}}),a("el-alert",{attrs:{title:"Tips",type:"warning",description:"设置后台管理系统的左侧菜单，目前至多支持两层菜单，三层以上菜单将不会显示。","show-icon":"",closable:!1}}),a("el-tree",{ref:"tree",staticClass:"am-margin-top-lg",attrs:{"default-expanded-keys":[1],lazy:"","node-key":"id",load:t.loadNode,props:t.defaultProps},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.node,n=e.data;return a("div",{staticClass:"node-box"},[a("div",{staticClass:"node-name"},[t._v("\n                "+t._s(r.label)+"\n            ")]),a("div",{staticClass:"node-action"},[a("div",{staticClass:"node-order"},[t._v("显示序号：\n                    "),a("el-tag",{attrs:{size:"mini"}},[t._v(t._s(n.order))])],1),a("el-button",{attrs:{type:"text",size:"mini",disabled:1==n.id},on:{click:function(e){return e.stopPropagation(),t.openEditModal(r,n)}}},[t._v("编辑\n                ")]),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return e.stopPropagation(),t.openAddModal(r,n)}}},[t._v("添加\n                ")]),a("el-button",{attrs:{type:"text",size:"mini",disabled:1==n.id},on:{click:function(e){return e.stopPropagation(),t.openDeleteModal(r,n)}}},[t._v("删除\n                ")])],1)])}}])}),a("el-dialog",{attrs:{title:"编辑节点",visible:t.EditModalVisible},on:{"update:visible":function(e){t.EditModalVisible=e}}},[a("el-form",{attrs:{"label-width":"80px","label-position":"left"}},[a("el-form-item",{attrs:{label:"菜单名称"}},[a("el-input",{model:{value:t.editForm.name,callback:function(e){t.$set(t.editForm,"name",e)},expression:"editForm.name"}})],1),a("el-form-item",{attrs:{label:"链接地址"}},[a("el-input",{attrs:{placeholder:"指定此菜单的链接地址，选填"},model:{value:t.editForm.path,callback:function(e){t.$set(t.editForm,"path",e)},expression:"editForm.path"}})],1),a("el-form-item",{attrs:{label:"显示顺序"}},[a("el-input",{attrs:{placeholder:"显示顺序按照数字从小到大，如2001"},model:{value:t.editForm.order,callback:function(e){t.$set(t.editForm,"order",e)},expression:"editForm.order"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.EditModalVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.UpdateNodeHandle}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"添加节点",visible:t.AddModalVisible},on:{"update:visible":function(e){t.AddModalVisible=e}}},[a("el-form",{attrs:{"label-width":"80px","label-position":"left"}},[a("el-form-item",{attrs:{label:"菜单名称"}},[a("el-input",{model:{value:t.addForm.name,callback:function(e){t.$set(t.addForm,"name",e)},expression:"addForm.name"}})],1),a("el-form-item",{attrs:{label:"链接地址"}},[a("el-input",{attrs:{placeholder:"指定此菜单的链接地址，选填"},model:{value:t.addForm.path,callback:function(e){t.$set(t.addForm,"path",e)},expression:"addForm.path"}})],1),a("el-form-item",{attrs:{label:"显示顺序"}},[a("el-input",{attrs:{placeholder:"显示顺序按照数字从小到大，如2001"},model:{value:t.addForm.order,callback:function(e){t.$set(t.addForm,"order",e)},expression:"addForm.order"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.AddModalVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.AddNodeHandle}},[t._v("确 定")])],1)],1)],1)},Oe=[],Ee={name:"Menu",components:{Title:mt},data:function(){return{defaultProps:{label:"name"},EditModalVisible:!1,editForm:{name:"",pId:"",path:"",order:""},AddModalVisible:!1,addForm:{name:"",pId:"",path:"",order:""},currentNodeData:"",currentNode:""}},methods:{loadNode:function(){var t=Object(ce["a"])(regeneratorRuntime.mark(function t(e,a){var r,n,s,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(0!==e.level){t.next=6;break}return t.next=3,ot.load({pId:0});case 3:return r=t.sent,n=r.data,t.abrupt("return",a(n));case 6:return t.next=8,ot.load({pId:e.data.id});case 8:s=t.sent,o=s.data,a(o);case 11:case"end":return t.stop()}},t)}));function e(e,a){return t.apply(this,arguments)}return e}(),openEditModal:function(t,e){this.EditModalVisible=!0,this.editForm=Object(f["a"])({},e),this.currentNode=t},openAddModal:function(t,e){this.addForm.pId=e.id,this.AddModalVisible=!0,this.currentNodeData=e},openDeleteModal:function(t,e){var a=this;this.$msgbox({type:"warning",title:"",message:"此操作将永久删除该分类, 是否继续?"}).then(Object(ce["a"])(regeneratorRuntime.mark(function r(){var n,s;return regeneratorRuntime.wrap(function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,ot.remove({id:e.id});case 2:n=r.sent,s=n.status,s&&(t.remove(),a.$message.success("删除成功!"));case 5:case"end":return r.stop()}},r)})))},AddNodeHandle:function(){var t=Object(ce["a"])(regeneratorRuntime.mark(function t(){var e,a,r,n,s,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ot.add(Object(f["a"])({},this.addForm));case 2:if(e=t.sent,a=e.status,r=e.msg,n=e.data,a){t.next=9;break}return this.$message.error(r),t.abrupt("return",!1);case 9:this.$message.success(r),this.AddModalVisible=!1,s=this.currentNodeData,o=Object(f["a"])({},this.addForm,n),s.children||this.$set(s,"children",[]),s.children.push(o),this.addForm={name:"",pId:"",path:""};case 16:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),UpdateNodeHandle:function(){var t=Object(ce["a"])(regeneratorRuntime.mark(function t(){var e,a,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ot.update(Object(f["a"])({},this.editForm));case 2:e=t.sent,a=e.status,r=e.msg,a&&(this.$message.success(r),this.EditModalVisible=!1,this.currentNode.data=Object(f["a"])({},this.editForm));case 6:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()}},Fe=Ee,De=(a("75b6"),Object(l["a"])(Fe,Se,Oe,!1,null,"800cd42a",null)),Re=De.exports,Pe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",t._l(t.menu,function(e,r){return a("el-card",{staticClass:"am-margin-bottom-sm"},[a("div",{staticClass:"menu-header",attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"menu-title am-text-sm"},[a("i",{staticClass:"el-icon-collection-tag"}),t._v("\n                "+t._s(e.name)+"\n            ")]),a("el-switch",{on:{change:function(a){return t.parentHandle(e.checked,e)}},model:{value:e.checked,callback:function(a){t.$set(e,"checked",a)},expression:"item.checked"}})],1),a("el-row",{attrs:{gutter:40}},t._l(e.children,function(r){return a("el-col",[a("div",{staticClass:"menu-box am-padding-vertical-xs"},[a("div",{staticClass:"am-text-xs"},[t._v(t._s(r.name))]),a("el-switch",{on:{change:function(a){return t.childHandle(r.checked,e)}},model:{value:r.checked,callback:function(e){t.$set(r,"checked",e)},expression:"element.checked"}})],1)])}),1)],1)}),1)},Ie=[],Ue={name:"Role-Setting",props:["id"],data:function(){return{menu:[]}},created:function(){this.loadRoleConfig(this.id)},methods:{loadRoleConfig:function(){var t=Object(ce["a"])(regeneratorRuntime.mark(function t(e){var a,r,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,W.loadConfig({id:e});case 2:a=t.sent,r=a.status,n=a.data,r&&(this.menu=n);case 6:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),parentHandle:function(t,e){var a=e.children;a.forEach(function(e){e.checked=t})},childHandle:function(t,e){var a=e.children.some(function(t){return t.checked});e.checked=a}}},Ne=Ue,Ae=(a("4da8"),Object(l["a"])(Ne,Pe,Ie,!1,null,"473623f9",null)),Ve=Ae.exports;r["default"].use(d["a"]);var He=[{path:"/register",name:"UserRegister",component:y},{path:"/login/",name:"UserLogin",component:g,props:function(t){return t.query},alias:"/"},{path:"/index",name:"Index",component:Jt,redirect:"/goods/list",meta:{requiredAuth:!0},children:[{path:"/goods/category/",name:"GoodsCategory",component:Yt,meta:{requiredAuth:!0}},{path:"/goods/list",name:"GoodsList",component:se,meta:{requiredAuth:!0}},{path:"/goods/release",name:"GoodsRelease",component:he,meta:{requiredAuth:!0}},{path:"/goods/edit/:id",name:"GoodsEdit",component:ke,props:!0,meta:{requiredAuth:!0}},{path:"/user/list",name:"UserList",component:vt,meta:{requiredAuth:!0}},{path:"/order/list",name:"OrderList",component:St,meta:{requiredAuth:!0}},{path:"/user/info",name:"UserInfo",component:wt,meta:{requiredAuth:!0}},{path:"/auth/role",name:"AuthRole",component:je,meta:{requiredAuth:!0},children:[{path:"config/:id",name:"RoleConfig",component:Ve,props:!0,meta:{requiredAuth:!0}}]},{path:"/auth/menu",name:"AuthMenu",component:Re,meta:{requiredAuth:!0}}]}],Le=new d["a"]({routes:He});Le.beforeEach(function(t,e,a){if(t.matched.some(function(t){return t.meta.requiredAuth})){if(!sessionStorage.token)return void a({path:"/login",query:{redirect:t.fullPath}});a()}else a()});var ze=Le,Be=function(t,e){var a=t.commit;t.state;return new Promise(function(t,r){P.login(e).then(function(e){e.status?(a("SetUserInfo",e.data),t(e)):r(e)})})},Te=function(t,e){var a=t.commit;t.state;return new Promise(function(t,r){P.register(e).then(function(e){e.status?(a("SetUserInfo",e.data),t(e)):r(e)})})},Ge=function(t,e){var a=t.commit;t.state;return new Promise(function(t,r){P.getUserInfo(e).then(function(e){e.status?(a("SetUserInfo",e.data),t(e)):r(e)})})},qe=function(t,e){var a=t.commit;t.state;return new Promise(function(t,r){P.updateUserInfo(e).then(function(n){n.status?(a("SetUserInfo",e),t(n)):r(n)})})},Je={Login:Be,Register:Te,GetUserInfo:Ge,UpdateUserInfo:qe},Ze=function(t){return t.userInfo.role},Ke=function(t){return t.userInfo.nickname},Qe=function(t){return t.userInfo.avatar},We={role:Ze,nickname:Ke,avatar:Qe},Xe=function(t,e){t.userInfo=e},Ye={SetUserInfo:Xe},ta={userInfo:""},ea={namespaced:!0,state:ta,actions:Je,getters:We,mutations:Ye},aa={},ra={},na=function(t,e){t.isCollapse=!t.isCollapse},sa={toggleMenu:na},oa={isCollapse:!1},ia={namespaced:!0,state:oa,actions:aa,getters:ra,mutations:sa};r["default"].use(Rt["a"]);var la=new Rt["a"].Store({modules:{User:ea,Menu:ia}}),ca=a("5c96"),ua=a.n(ca);a("0fae");r["default"].use(ua.a,{size:"small"});var da,ma=a("a7fe"),pa=a.n(ma);S.a.interceptors.request.use(function(t){return da=ca["Loading"].service({background:"rgba(0, 0, 0, 0.8)"}),"/api/admin/login"==t.url||"/api/admin/register"==t.url?t:(sessionStorage.token?t.headers.Authorization="Bearer ".concat(sessionStorage.token):ca["Message"].error("token未获取，请登录！"),t)},function(t){return Promise.reject(t)}),S.a.interceptors.response.use(function(t){switch(setTimeout(function(){da.close()},500),t.status){case 200:return t.data;default:ca["Message"].error(t.response.statusText);break}},function(t){return 401==t.response.status&&ca["Message"].error("Token无效，请重新登录！"),Promise.reject(t)}),r["default"].use(pa.a,S.a),r["default"].config.productionTip=!1,new r["default"]({router:ze,store:la,render:function(t){return t(u)}}).$mount("#app")},5762:function(t,e,a){},"5c0b":function(t,e,a){"use strict";var r=a("5e27"),n=a.n(r);n.a},"5e27":function(t,e,a){},"5f9f":function(t,e,a){},"62f0":function(t,e,a){},"75b6":function(t,e,a){"use strict";var r=a("a45a"),n=a.n(r);n.a},"7e08":function(t,e,a){"use strict";var r=a("5202"),n=a.n(r);n.a},8553:function(t,e,a){},a45a:function(t,e,a){},a687:function(t,e,a){"use strict";var r=a("c13c"),n=a.n(r);n.a},b0ac:function(t,e,a){},baa0:function(t,e,a){},c0fc:function(t,e,a){"use strict";var r=a("5762"),n=a.n(r);n.a},c13c:function(t,e,a){},ca0b:function(t,e,a){"use strict";var r=a("62f0"),n=a.n(r);n.a},ca9c:function(t,e,a){"use strict";var r=a("2a56"),n=a.n(r);n.a},cacb:function(t,e,a){"use strict";var r=a("5f9f"),n=a.n(r);n.a},cdcf:function(t,e,a){"use strict";var r=a("b0ac"),n=a.n(r);n.a},d742:function(t,e,a){t.exports=a.p+"img/logo.efe6a81a.png"},e981:function(t,e,a){}});
//# sourceMappingURL=app.687b4f07.js.map